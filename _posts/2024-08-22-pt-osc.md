

[使用文档](https://docs.percona.com/percona-toolkit/pt-online-schema-change.html)

**详细执行流程如下：**
1. 相关环境参数检查
2. 检查该表格是否存在
3. show create table tbosc
4. create table _tbosc_new
5. alter table _tbosc_new 
6. 创建删除触发器 pt_osc_dbddl_tbosc_del **(如果数据修改的时候，还没有拷贝过来，修改后再拷贝则是覆盖，正确；如果是已经拷贝过来，再修改，也是正确，这里同时会检查是否具有主键或者唯一索引，如果都没有，这一步会报错，提示The new table `dbosc`.`_tbosc_new` does not have a PRIMARY KEY or a unique index which is required for the DELETE trigger.）**
7. 创建更新触发器 pt_osc_dbddl_tbosc_upd
8. 创建插入触发器 pt_osc_dbddl_tbosc_ins
9. 按块拷贝数据到新表，拷贝过程对数据行持有S锁
10. analyze 新表
11. rename 表名，RENAME TABLE `dbddl`.`tbosc` TO `dbddl`.`_tbosc_old`, `dbddl`.`_tbosc_new` TO `dbddl`.`tbosc`
12. 删除旧表
13. 删除新表上的删除、更新、插入 触发器

如果有表存在会新建表
failed to find a unique new table name after 10 attemps.  the following tables exist which may be left over from previous failed runs of the tool:
  `test_db`.`_big_table_new`
  `test_db`.`__big_table_new`
  `test_db`.`___big_table_new`
  `test_db`.`____big_table_new`
  `test_db`.`_____big_table_new`
  `test_db`.`______big_table_new`
  `test_db`.`_______big_table_new`
  `test_db`.`________big_table_new`
  `test_db`.`_________big_table_new`
  `test_db`.`__________big_table_new`
examine these tables and drop some or all of them if they are no longer need, then re-run the tool.
